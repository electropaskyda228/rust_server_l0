# rust order server

## Отправка запросов
Отправка `json`-файлов осуществляется по адресу `http://host:port/add`. Перейдите по адресу `http://host:port/get`, чтобы получить `json`-файлы bp БД. `host` и `port` вы выбираете сами, когда запускаете сервер.

## Запуск сервера
Для запуска сервера необходимо ввести команду в папке проекта. Параметры можно выбирать свои.
```bash
cargo run -- --server-host localhost --server-port 8081 --db-user postgres --db-password George0404 --db-name rust_l0 --db-host localhost --db-port 5432
```

## Тестирование запросов
В файле `test_request` три запроса: первый тестирует получение заказов, второй отправляет неправильный запрос на добавление и третий - правильный запрос на добавление.

## Работа сервера
Сервер хранит в себе кеш, реализованный через `Vec<Order>`. Работа с бд осуществляется средствами `tokio_postgres`. При запуске сервера данные из бд копируются в кеш. Когда данные поступают на сервер, программа пытается сохранить их в бд и, при успехе, добавляет их еще и в кеш. Когда необходимо отправить данные бд пользователю, то они берутся из кеша без обращения к бд. 

## Создание базы данных
Файл `Create.sql` хранит запросы для создания сущностей базы данных.

## Проблема с запросами
Можно сделать такой запрос, что часть данных сохранится в бд, но не полностью, и не сохранятся в кеше. К сожалению, времени исправить баг уже нет.
